<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Apache Cassandra | Apache Cassandra Documentation</title>
    <link rel="stylesheet" href="../../assets/css/site.css">
    <meta name="description" content="The Apache Cassandra Community">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="_">
    <meta name="dcterms.identifier" content="master">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="icon" href="../../assets/img/favicon.ico" type="image/x-icon">
<script>
  const script = document.createElement("script");
  const domain = window.location.hostname;
  script.type = "text/javascript";
  script.src = "https://plausible.cassandra.apache.org/js/plausible.js";
  script.setAttribute("data-domain",domain);
  script.setAttribute("defer",'true');
  script.setAttribute("async",'true');
  document.getElementsByTagName("head")[0].appendChild(script);
</script>  </head>
  <body class="case-study">
      <div class="container mx-auto relative">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta property="og:type" content="website" />
	<meta property="og:description" content="" />
	<meta property="og:url" content="/" />
	<meta property="og:site_name" content="Apache Cassandra" />

<header id="top-nav">
    <div class="inner relative">
        <div class="header-social-icons text-right">
            <a href="https://twitter.com/cassandra?lang=en" target="_blank" styles="margin-left: 20px;"><img src="../../assets/img/twitter-icon-circle-white.svg" alt="twitter icon" width="24"></a>
            <a href="https://www.linkedin.com/company/apache-cassandra/"  target="_blank" styles="margin-left: 20px;"><img src="../../assets/img/LI-In-Bug.png" alt="linked-in icon" width="24"></a>
            <a href="https://www.youtube.com/c/PlanetCassandra" target="_blank" styles="margin-left: 20px;"><img src="../../assets/img/youtube-icon.png" alt="youtube icon" width="24"></a>
        </div>
        <div class="cf">
            <div class="logo left"><a href="/"><img src="../../assets/img/logo-white-r.png" alt="cassandra logo"></a></div>
            <div class="mobile-nav-icon right">
                <img class="toggle-icon" src="../../assets/img/hamburger-nav.svg">
            </div>
            <ul class="main-nav nav-links right flex flex-vert-center flex-space-between">
    <li>
        <a class="nav-link hide-mobile">Get Started</a>
        <ul class="sub-menu bg-white">
            <li class="pa-micro">
                <a href="/_/cassandra-basics.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-basics.png" alt="cassandra basics icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Cassandra Basics
                    </div>
                </a>
            </li>
            <li class="pa-micro">
                <a href="/_/quickstart.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-rocket.png" alt="cassandra basics icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Quickstart
                    </div>
                </a>
            </li>
            <li class="pa-micro">
                <a href="/_/ecosystem.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-ecosystem.png" alt="cassandra basics icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Ecosystem
                    </div>
                </a>
            </li>
        </ul>
    </li>
    <li><a class="nav-link" href="/doc/latest/">Documentation</a></li>
    <li>
        <a class="nav-link" href="/_/community.html">Community</a>
        <ul class="sub-menu bg-white">
            <li class="pa-micro">
                <a href="/_/community.html#code-of-conduct">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-welcome.png" alt="welcome icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Welcome
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/community.html#discussions">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-discussions.png" alt="discussions icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Discussions
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/community.html#project-governance">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-governance.png" alt="Governance icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Governance
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/community.html#how-to-contribute">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-contribute.png" alt="Contribute icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Contribute
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/community.html#meet-the-community">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-community.png" alt="Meet the Community icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Meet the Community
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/cassandra-catalyst-program.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-catalyst.png" alt="Catalyst icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Catalyst Program
                    </div>
                </a>
            </li>
            <li class="pa-micro hide-mobile">
                <a href="/_/events.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-events.png" alt="Events icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Events
                    </div>
                </a>
            </li>
        </ul>
    </li>
    <li>
        <a class="nav-link hide-mobile">Learn</a>
        <ul class="sub-menu bg-white">
            <li class="pa-micro">
                <a href="/_/Apache-Cassandra-5.0-Moving-Toward-an-AI-Driven-Future.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-basics.png" alt="Basics icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Cassandra 5.0
                    </div>
                </a>
            </li>
            <li class="pa-micro">
                <a href="/_/case-studies.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-case-study.png" alt="Case Studies icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Case Studies
                    </div>
                </a>
            </li>
            <li class="pa-micro">
                <a href="/_/resources.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-resources.png" alt="Resources icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Resources
                    </div>
                </a>
            </li>
            <li class="pa-micro">
                <a href="/_/blog.html">
                    <div class="sub-nav-icon">
                        <img src="../../assets/img/sub-menu-blog.png" alt="Blog icon">
                    </div>
                    <div class="sub-nav-text teal py-small">
                        Blog
                    </div>
                </a>
            </li>
        </ul>
    </li>
    <li><a class="nav-link btn btn--filled" href="/_/download.html">Download Now</a></li>
</ul>
        </div>
    </div>
</header>

        <div class="hero hero--home grad">
            <div class="eye"></div>
            <div id="home-content" class="text-center flex flex-center flex-column relative z2 ma-xlarge">
                <h1>Backblaze</h1>
            </div>
        </div>
        <div id="blog-post" class="flex-center py-large arrow">
            <div class="post-content">
                <div class="inner inner--narrow">
                    <div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="../_images/companies/backblaze.png" alt="Backblaze">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="backblaze-delivers-iaas-with-apache-cassandra"><a class="anchor" href="#backblaze-delivers-iaas-with-apache-cassandra"></a>Backblaze Delivers IaaS with Apache Cassandra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Founded in 2007, Backblaze, based in San Mateo, CA, is a cloud storage company with more than an exabyte of data under management and customers in over 175 countries.</p>
</div>
<div class="paragraph">
<p>The Backblaze Storage Cloud provides a foundation for businesses, developers, IT professionals, and individuals to store, backup, archive data, and, in partnership with other leading technology companies, host content, manage media, build their applications, and more</p>
</div>
<div class="paragraph">
<p>The company started life as a computer backup company run from a one-bedroom apartment with a clear mission to make storing and using data astonishingly easy. Backblaze was a popular backup service in niches such as photography and genealogy in its early days. Its focus on keeping backup simple and easy to use has broadened its appeal over time.</p>
</div>
<div class="paragraph">
<p>Since 2013, Backblaze has regularly published hard drive performance statistics and insights&#8201;&#8212;&#8201;the only player in the market to do so. This transparency resonated with existing and prospective users and led to a following among developers and IT professionals that wanted to perform more complicated tasks beyond what Backblaze currently offered. With its Backblaze Computer Backup product firmly established, the company decided to develop Backblaze B2 Cloud Storage, a cloud storage platform providing infrastructure as a service (Iaas).</p>
</div>
<div class="paragraph">
<p>This IaaS would provide direct API access and enable developers and IT people to store in the cloud, retrieve and/or share data and scale up and down while only paying for what they used. Essentially, Backblaze B2 offers cloud storage similar to Amazon S3, Microsoft Azure Storage, and Google Cloud Storage that is easy to use, affordable, and trusted.</p>
</div>
<div class="paragraph">
<p>However, the existing Computer Backup stack wasn’t suitable for this new use case. It was a custom store, where the company controlled the client as well. “The Computer Backup index was very custom to how the Computer Backup system worked, so we had to start from scratch with Backblaze B2 and create a different system,” says Elliott Sims, Senior Systems Administrator at Backblaze.</p>
</div>
<div class="paragraph">
<p>It was at this point that Backblaze investigated distributed databases, and Apache Cassandra was introduced.</p>
</div>
<div class="sect2">
<h3 id="testimonial-quote"><a class="anchor" href="#testimonial-quote"></a>Testimonial quote</h3>
<div class="quoteblock">
<blockquote>
“We needed something that would handle really high write throughput and keep scaling on the write throughput. That forced us to look at distributed stores, and Apache Cassandra was the option that fitted what we needed.”
</blockquote>
<div class="attribution">
&#8212; Elliott Sims<br>
<cite>Senior Systems Administrator</cite>
</div>
</div>
<div class="paragraph">
<p>For the launch of Backblaze B2 in 2015, the company adopted Ansible for software provisioning, configuration management, and application deployment and paired it with Apache Cassandra for its data needs, applying templates and Reaper for handling repairs. In selecting Apache Cassandra, there were several vital benefits that made it the preferred choice for the new cloud solution:</p>
</div>
</div>
<div class="sect2">
<h3 id="scalable-and-elastic-performance-that-delivers"><a class="anchor" href="#scalable-and-elastic-performance-that-delivers"></a>Scalable and elastic performance that delivers</h3>
<div class="paragraph">
<p>Backblaze needed to see an increase in write throughput as it added more hosts. “If you need just read throughput, traditional MySQL replication works great as you can keep stamping out replicas, but we needed write throughput as well. Cassandra was able to do that out of the box as opposed to using layering or our own sharding on top of MySQL,” says Sims. Backblaze has also found the write throughput and scaling with Cassandra have been very nearly linear. “30 machines does mean having three times the capacity of 10 machines with Apache Cassandra, or, you know, 2.95 times.”</p>
</div>
</div>
<div class="sect2">
<h3 id="durability-that-withstands-a-data-center-going-down"><a class="anchor" href="#durability-that-withstands-a-data-center-going-down"></a>Durability that withstands a data center going down</h3>
<div class="paragraph">
<p>While write throughput was a key concern, Backblaze needed some standard database requirements as well: “When we put a piece of data in, it needed to stay there if the machine crashes. It can’t just lose a chunk of data, like some of the NoSQL databases are prone to do. It had to write it to disk and not be a cache that periodically snapshots, for instance,” says Sims.</p>
</div>
</div>
<div class="sect2">
<h3 id="fault-tolerance-without-downtimes"><a class="anchor" href="#fault-tolerance-without-downtimes"></a>Fault tolerance without downtimes</h3>
<div class="paragraph">
<p>Like any company that values the sleep of its database operators, Backblaze wanted the ability to lose a machine overnight, “we didn’t want to have to page someone to scramble and fix it. We needed a solution that would withstand and ignore any single machine going offline.” As Apache Cassandra is decentralized and all data is automatically replicated to multiple nodes, there is no single point of failure</p>
</div>
</div>
<div class="sect2">
<h3 id="the-benefits-of-apache-cassandra-4-0-for-backblaze"><a class="anchor" href="#the-benefits-of-apache-cassandra-4-0-for-backblaze"></a>The benefits of Apache Cassandra 4.0 for Backblaze</h3>
<div class="paragraph">
<p>Jumping to 4.0 is not an immediate consideration for Backblaze, “The way we use Apache Cassandra is as an authoritative source of truth for where user files are as opposed to analytics, and so on, so we are a little wary,” says Sims. But there are a number of features that Backblaze is excited about exploiting, and they anticipate a move with the release of 4.0.1 or later.</p>
</div>
</div>
<div class="sect2">
<h3 id="incremental-repairs-to-eliminate-a-tombstone-issue"><a class="anchor" href="#incremental-repairs-to-eliminate-a-tombstone-issue"></a>Incremental repairs to eliminate a tombstone issue</h3>
<div class="paragraph">
<p>“The biggest one is incremental backups in conjunction with the leveled compaction strategy,” says Sims. Backblaze uses several small tables where tombstones (deleted data that hasn’t been purged from the disk) have been a problem. With SizeTieredCompactionStrategy (STCS), you can set Cassandra only to compact away tombstones that have been repaired. “This means you can set a really short gc_grace_seconds, which means the tombstones are cleaned up a lot more frequently on a small table that you might use [&#8230;&#8203;] They are a very small percentage of the total, so if we can run Incremental Repair on them multiple times a day those tombstones would be very short-lived - ten hours instead of ten days. It will essentially eliminate the problem.”</p>
</div>
</div>
<div class="sect2">
<h3 id="easier-data-migrations-with-token-distribution-change"><a class="anchor" href="#easier-data-migrations-with-token-distribution-change"></a>Easier data migrations with token distribution change</h3>
<div class="paragraph">
<p>When performing a data center migration, Cassandra 4.0 will enable users to distribute tokens based on replication level instead of schema, which eliminates the chicken and egg dependency “Being able to distribute tokens based on specific schema is nice for balance,” says Sims. “But the new method cuts out a finicky process of manually assigning tokens for the new data center […] that will make my life easier for the remaining data center migrations and reduce the vnode count.”</p>
</div>
</div>
<div class="sect2">
<h3 id="kubernetes-for-cassandra"><a class="anchor" href="#kubernetes-for-cassandra"></a>Kubernetes for Cassandra</h3>
<div class="paragraph">
<p>While Backblaze has a test environment for Kubernetes running right now, but Sims says they are moving more to the environment as Backblaze adds miscellaneous services to Backblaze B2. “I think we’ll end up moving to Kubernetes for Cassandra eventually, but at the moment we’re using bare metal controlled by Ansible [&#8230;&#8203;] Reaper has been easy to manage for the most part, and as we bring more clusters online, we’ll get more interested in the Reaper component of the cass-operator.”</p>
</div>
<div class="paragraph">
<p>While Sims says Apache Cassandra has various complexities and pain points, he sees it as delivering on its promises for Backblaze: “The promises of scalable write throughputs and the resiliency&#8201;&#8212;&#8201;where it keeps your data when it says it will&#8201;&#8212;&#8201;have been kept with Apache Cassandra. These are important things, and [&#8230;&#8203;] keeping your data is unfortunately not something I can say for some of the other new storage systems.”</p>
</div>
</div>
<div class="sect2">
<h3 id="about-backblaze"><a class="anchor" href="#about-backblaze"></a>About Backblaze</h3>
<div class="paragraph">
<p>Backblaze makes managing data astonishingly easy for businesses and consumers. The Backblaze Storage Cloud provides a foundational platform for a broad community of developers, IT generalists, entrepreneurs, and individuals who seek easy, affordable, trusted solutions. With more than an exabyte of data under management, the company currently works with customers in over 175 countries. Founded in 2007, the company is based in San Mateo, CA. For more information, please go to <a href="http://www.backblaze.com/">www.backblaze.com</a>.</p>
</div>
</div>
</div>
</div>
                </div>
            </div>
        </div>
        <footer class="grad grad--two flex-center pb-xlarge">
    <div class="inner text-center z2 relative">
        <h2 class="white py-small">Get started with Cassandra, fast.</h2>
        <a id="footer-cta" href="/_/quickstart.html" class="btn btn--filled ma-medium">Quickstart Guide</a>
    </div>
    <div class="inner flex flex-distribute-items mt-xlarge z2 relative">
        <div class="col-2">
            <div id="footer-logo" class="logo logo--footer mb-medium"><img src="../../assets/img/logo-white-r.png" alt="Cassandra Logo"></div>
            <p>Apache Cassandra<img src="../../assets/img/registered.svg" alt="®" style="width:18px;"> powers mission-critical deployments with improved performance and unparalleled levels of scale in the cloud.</p>
            <div class="footer-social-icons">
                <a href="https://twitter.com/cassandra?lang=en" target="_blank"><img src="../../assets/img/twitter-icon-circle-white.svg" alt="twitter icon" width="24"></a>
                <a href="https://www.linkedin.com/company/apache-cassandra/" target="_blank"><img src="../../assets/img/LI-In-Bug.png" alt="linked-in icon" width="24"></a>
                 <a href="https://www.youtube.com/c/PlanetCassandra" target="_blank"><img src="../../assets/img/youtube-icon.png" alt="youtube icon" width="24"></a>
            </div>
        </div>
        <div class="col-2 flex flex-center">
            <ul class="columns-2">
                <li class="mb-small"><a href="/">Home</a></li>
                <li class="mb-small"><a href="/_/cassandra-basics.html">Cassandra Basics</a></li>
                <li class="mb-small"><a href="/_/quickstart.html">Quickstart</a></li>
                <li class="mb-small"><a href="/_/ecosystem.html">Ecosystem</a></li>
                <li class="mb-small"><a href="/doc/latest/">Documentation</a></li>
                <li class="mb-small"><a href="/_/community.html">Community</a></li>
                <li class="mb-small"><a href="/_/case-studies.html">Case Studies</a></li>
                <li class="mb-small"><a href="/_/resources.html">Resources</a></li>
                <li class="mb-small"><a href="/_/blog.html">Blog</a></li>
            </ul>
        </div>
    </div>
</footer>
<div class="lower-footer bg-white pa-medium">
    <div class="flex flex-row flex-vert-center">
        <div class="pr-medium"><img src="../../assets/img//feather-small.png" alt="ASF" width="20"></div>
        <div class="pr-medium"><a href="http://www.apache.org/" target="_blank">Foundation</a></div>
        <div class="pr-medium"><a href="https://www.apache.org/events/current-event.html" target="_blank">Events</a></div>
        <div class="pr-medium"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div>
        <div class="pr-medium"><a href="https://www.apache.org/foundation/thanks" target="_blank">Thanks</a></div>
        <div class="pr-medium"><a href="https://www.apache.org/security" target="_blank">Security</a></div>
        <div class="pr-medium"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank">Privacy</a></div>
        <div class="pr-medium"><a href="https://www.apache.org/foundation/sponsorship" target="_blank">Sponsorship</a></div>
    </div>
    <p class="my-medium">© 2009-<script>document.write(new Date().getFullYear())</script> <a href="https://apache.org" target="_blank">The Apache Software Foundation</a> under the terms of the Apache License 2.0.  Apache, the Apache feather logo, Apache Cassandra, Cassandra, and the Cassandra logo, are either registered trademarks or trademarks of The Apache Software Foundation.</p>
</div>
<div id="fade" class="hidden"></div>
<div id="modal" class="hidden">
  <div id="close-modal" class="cursor-pointer"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>
  <div id="mod-content" class="vid-mod-content resp-container"></div>
</div>
<script>
jQuery(function(){
    var windowW = $(window).width();
    $(document)
    .on('click','.mobile-nav-icon',function(){
        $('.main-nav').fadeIn();
    })
    .on('click','.main-nav',function(){
        if(windowW <= 1000){
            $(this).fadeOut();
        }
    })
    .on('click','#version-toggle',function(){
      $(this).toggleClass('active');
      $(this).next().fadeToggle();
    })
    .on('click','#mobile-docs-nav-burger', function(){
      $(this).toggleClass('active');
      $('.docs-nav').toggleClass('active');
    });
    var url = window.location.pathname;
    var isQuickstart = url.includes('quickstart.html');
    if(isQuickstart){
      var footerCTA = document.getElementById('footer-cta');
      footerCTA.innerHTML = 'Get latest updates';
      footerCTA.setAttribute('href', '/_/blog.html');
    }
});
</script>
      </div>
  </body>
<script>
jQuery(function(){
    
});
</script>
</html>
