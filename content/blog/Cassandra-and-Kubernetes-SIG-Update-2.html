<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Cassandra and Kubernetes: SIG Update #2 | Blog</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<link rel="stylesheet" href="/style.css">
		<script src="/init.js"></script>
		
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400&family=Red+Hat+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&display=swap" rel="stylesheet">
	
			
	
	</head>
	<body class="blog-index">
		<div class="container mx-auto">
			<div id="mobile-nav-overlay" class="hide">
				<div class="mobile-nav flex flex-column text-center">
					<a class="mobile-nav-link" href="/cassandra-basics/">Cassandra Basics</a>
					<a class="mobile-nav-link" href="/quickstart/">Quickstart</a>
					<a class="mobile-nav-link" href="/ecosystem/">Ecosystem</a>
					<a class="mobile-nav-link" href="https://cassandra.apache.org/doc/latest/">Documentation</a>
					<a class="mobile-nav-link" href="/community/">Community</a>
					<a class="mobile-nav-link" href="/case-studies/">Case Studies</a>
					<a class="mobile-nav-link" href="/resources/">Resources</a>
					<a class="mobile-nav-link" href="/blog/">Blog</a>
					<a class="mobile-nav-link" href="/download/">Download</a>
				</div>
			</div>
			<header class="grad">
				<div class="eye"></div>
				<div id="top-nav" class="inner flex flex-vert-center flex-space-between relative">
					<div class="logo"><a href="/"><img src="/img/logo-white.svg" alt=""></a></div>
					<div class="mobile-nav-icon">
						<img class="toggle-icon" src="/img/hamburger-nav.svg">
					</div>
					
					<ul class="nav-links flex flex-vert-center flex-space-between">
						<li>
							<a class="nav-link">Get Started</a>
							<ul class="sub-menu bg-white">
								<li class="pa-micro">
									<a href="/cassandra-basics/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-basics.png" alt="cassandra basics icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Cassandra Basics
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/quickstart/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-rocket.png" alt="cassandra basics icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Quickstart
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/ecosystem/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-ecosystem.png" alt="cassandra basics icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Ecosystem
										</div>
									</a>
								</li>
							</ul>
						</li>
						<li><a class="nav-link" href="https://cassandra.apache.org/doc/latest/">Documentation</a></li>
						<li>
							<a class="nav-link" href="/community/">Community</a>
							<ul class="sub-menu bg-white">
								<li class="pa-micro">
									<a href="/community/#code-of-conduct">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-welcome.png" alt="welcome icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Welcome
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/community/#discussion">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-discussions.png" alt="discussions icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Discussions
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/community/#project-governance">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-governance.png" alt="Governance icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Governance
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/community/#how-to-contribute">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-contribute.png" alt="Contribute icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Contribute
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/community/#meet-the-community">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-community.png" alt="Meet the Community icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Meet the Community
										</div>
									</a>
								</li>
							</ul>
						</li>
						<li>
							<a class="nav-link">Learn</a>
							<ul class="sub-menu bg-white">
								<li class="pa-micro">
									<a href="/case-studies/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-case-study.png" alt="Case Studies icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Case Studies
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/resources/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-resources.png" alt="Resources icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Resources
										</div>
									</a>
								</li>
								<li class="pa-micro">
									<a href="/blog/">
										<div class="sub-nav-icon">
											<img src="/img/sub-menu-blog.png" alt="Blog icon">
										</div>
										<div class="sub-nav-text teal py-small">
											Blog
										</div>
									</a>
								</li>
							</ul>
						</li>
						<li><a class="nav-link btn btn--filled" href="/download/">Download Now</a></li>
					</ul>
					
				</div>
				<div class="text-center flex flex-center flex-column relative z2 ma-xlarge">
					<h1 class="ma-large">
                        Cassandra and Kubernetes: SIG Update #2
                    </h1>
					<h3> June 9, 2021  | Rahul Singh, John Sanda</h3> 
				</div>
			</header>
			<section id="blog-post" class="arrow py-xlarge">
				<div class="inner"><h5><a href="/blog">« Back to the Apache Cassandra Blog</a></h5>
                    <hr>
                    <p>The Cassandra Kubernetes SIG is excited to share that there has been coalescence around the <a href="https://github.com/datastax/cass-operator" target="_blank">Cass Operator</a> project as the community-based operator.</p>

                    <p>It is no understatement to say that moving towards a single operator for the Apache Cassandra community has been a technical challenge. There are several <a href="https://cassandra.apache.org/blog/2020/08/14/cassandra-and-kubernetes-sig-update.html" target="_blank">Kubernetes operator projects for Cassandra</a>, and there were at least five different ways to go about this. Initially, it seemed we were going to create a standard and build a fresh operator from scratch, adopting the others’ ideas. For more details on this discussion, check out this lengthy dev mailing list <a href="https://lists.apache.org/thread.html/r473275258f3203121935c2412fbe94c0fc368fe17b72141957afef62%40%3Cdev.cassandra.apache.org%3E" target="_blank">thread</a>.</p>

                    <p>For the next stage, the SIG is focused on increasing Cass Operator’s community adoption with the ultimate goal of bringing the project into the ASF.</p>

                    <h3>Why Cass-Operator?</h3>

                    <p>Several features of the Cass-Operator project, open-sourced by DataStax, made it the prime candidate for the other projects to rally around. (You can read about the five major Kubernetes Operators for Cassandra in the last <a target="_blank" href="https://cassandra.apache.org/blog/2020/08/14/cassandra-and-kubernetes-sig-update.html">Cassandra SIG update</a>.)</p>

                    <figure>
                    	<img src="/img/blog-post-cassandra-and-kubernetes-sig-update/cass-operator-diagram.png" alt="High Level Architecture of the Cass Operator in Kubernetes">
                    	<figcaption>High Level Architecture of the Cass Operator in Kubernetes</figcaption>
                    </figure>

                    <p>Cass-Operator has major features for datacenter provisioning and operations and has Apache Cassandra’s best practices baked into the automations:</p>

                    <ol>
                    	<li><b>Bootstraps nodes appropriately</b> - this feature is important because when Cassandra starts up it needs to start the initial seeds first, in each rack, in a uniform manner.</li>
                    	<li><b>Scales up and scales down clusters gracefully</b> - nodes are intelligently scaled up and down one at a time across racks so that replicas of data are uniformly distributed.</li>
                    	<li><b>Automated node recovery processes</b> - basic operations such as restart, replace node, or replace an instance are all automated.</li>
                    	<li><b>Basic topology</b> - this feature makes multi-DC / multi-rack clusters fairly easy to create.</li>
                    	<li><b>Advanced topology</b> - Advanced networking at the Kubernetes layer makes multi-region / multi-K8s clusters possible with CNIs such as Cilium or externally via traditional networking tools.</li>
                    	<li><b>Customizable containers</b> - applying containerization best practice, this enables human operators to merge containers they have built with what’s offered in the cass-operator so that they don’t have to deal with secrets/volumes.</li>
                    </ol>
                    
                    <figure>
                    	<img src="/img/blog-post-cassandra-and-kubernetes-sig-update/apache-cassandra-cluster-on-kubernetes.png" alt="An Apache Cassandra Cluster managed by Cass Operator in Kubernetes across different workers with StatefulSets managing the pods running Cassandra.">
                    	<figcaption>An Apache Cassandra Cluster managed by Cass Operator in Kubernetes across different workers with StatefulSets managing the pods running Cassandra.</figcaption>
                    </figure>

                    <h3>Cass-Operator Differentiators</h3>

                    <p>Cass-Operator has many general features that distinguish it even before it is merged with the powerful features that CassKop will supply:</p>

                    <ol>
                    	<li>The operator leverages a number of existing open source tools in the OSS ecosystem and commercial components that have been open-sourced to avoid issues with vendor lock-in:</li>
                    		<ol type="a">
                    		<li>Open-sourced Cass Config Builder extracted from DataStax OpsCenter Life Cycle Manager.</li>
                    		<li>Open-sourced Management API for Apache Cassandra (MAAC).</li>
                    		<li>Open-sourced Metrics Collector for Apache Cassandra (MCAC).</li>
                    		<li>Open-sourced SRE tools such as Prometheus and Grafana Operator.</li>
                    		</ol>
                    	<li>PodTemplateSpec enables operators to super-customize existing pods.</li>
                    	<li>Cass-Operator implements advanced networking and manages the node ports and host networks.</li>
                    	<li>Management API mTLS support provides simple security.</li>
                    	<li>Automated generation of keystore and truststore for internode and client to node TLS.</li>
                    	<li>Automated superuser account configuration according to best practices.</li>
                    	<li>NetworkTopologyStrategy is automatically applied with appropriate replication factor (RF) for system keyspaces.</li>
                    	<li>Webhook validation ensures that invalid changes are rejected with a helpful message.</li>
                    	<li>Rolling cluster updates which allow for changes related to a change in binary (C* upgrade), a change in configuration, and canary deployments - single rack application of changes for validation before broader deployment.</li>
                    	<li>Operator certification and thorough testing on several platforms, including Azure AKS, Amazon EKS, Google GKE, Red Hat OpenShift, and VMWare Tanzu Kubernetes.</li>
                    	<li>Well documented cloud storage classes, ingress solutions and reference Implementations with an example application using the Java driver.</li>
                    	<li>Super-useful cluster-level stop / resume, which stops all running instances while keeping persistent storage. This feature allows for scaling compute down to zero, and bringing the cluster back up follows the expected Cassandra startup processes.</li>
                	</ol>

                	 <h3>CassKop operator features that are being merged</h3>

                	 <p>There are features in the CassKop operator, open-sourced by Orange Telecom, which are being merged/committed into the CassOperator project:</p>

                	 <ol>
                	 	<li>Node labeling to map any internal architecture, including network-specific labels to help with multi-datacenter setup.</li>
                	 	<li>Volumes and sidecar management (which could be linked to PodTemplateSpec).</li>
                	 	<li>Backup & Restore (Note: the CassKop project ruled out using <a href="https://velero.io/" target="_blank">Velero</a>, and used <a href="https://github.com/instaclustr/esop" target="_blank">Instaclustr esop</a> but <a href="https://github.com/thelastpickle/cassandra-medusa" target="_blank">Medusa</a> could work too).</li>
                	 	<li>Kubectl plugin integration, which is useful on the ops side without an admin UI.</li>
                	 	<li>MultiCassKop evolution to drive multiple Cass-Operators clusters instead of multiple CassKops clusters (Note: This may remain Orange internal if too specific)</li>
                	 </ol>

                	 As you can see, there’s a lot of great things being developed for the Apache Cassandra project so that relates well with the Kubernetes world. We’ll also have a roadmap post soon. Join us for the next Cassandra Kubernetes SIG meeting or say hi on the <a href="https://the-asf.slack.com" target="_blank">Apache Software Foundation’s Slack team</a> by joining the <a href="https://app.slack.com/client/T4S1WH2J3/C014SSUAL9E" target="_blank">#cassandra-kubernetes</a> channel.</p>

                    <p>Join the <a href="https://cwiki.apache.org/confluence/display/CASSANDRA/Cassandra+Kubernetes+SIG" target="_blank">biweekly meetings</a> to stay informed.</p>

                	 <p>This article originally was posted to Container Journal in April 2021. Reposted with permission. Please see the original article here: <a href="https://containerjournal.com/topics/cassandra-kubernetes-sig-picks-cass-operator-for-k8s/" target="_blank">https://containerjournal.com/topics/cassandra-kubernetes-sig-picks-cass-operator-for-k8s/</a>

				</div>
			</section>
			<footer class="grad grad--two flex-center pb-xlarge">
				<div class="inner text-center z2 relative">
					<h2 class="white py-small">Get started with Cassandra, fast.</h2>
					<a href="/quickstart/" class="btn btn--filled ma-medium">Quickstart Guide</a>
				</div>
				<div class="inner flex flex-distribute-items mt-xlarge z2 relative">
					<div class="col-2">
						<div class="logo mb-medium"><img src="/img/logo-white.svg" alt=""></div>
						<p>Apache Cassandra powers mission-critical deployments with improved performance and unparalleled levels of scale in the cloud.</p>
					</div>
					<div class="col-2 flex flex-center">
						<ul class="columns-2">
							<li class="mb-small"><a href="/">Home</a></li>
							<li class="mb-small"><a href="/cassandra-basics/">Cassandra Basics</a></li>
							<li class="mb-small"><a href="/quickstart/">Quickstart</a></li>
							<li class="mb-small"><a href="/ecosystem/">Ecosystem</a></li>
							<li class="mb-small"><a href="https://cassandra.apache.org/doc/latest/">Documentation</a></li>
							<li class="mb-small"><a href="/community/">Community</a></li>
							<li class="mb-small"><a href="/case-studies/">Case Studies</a></li>
							<li class="mb-small"><a href="/resources/">Resources</a></li>
							<li class="mb-small"><a href="/blog/">Blog</a></li>
							
						</ul>
					</div>
				</div>
			</footer>
			<div class="lower-footer bg-white pa-medium">
				<div class="flex flex-row flex-vert-center">
					<div class="pr-medium"><img src="../img/feather-small.png" alt="ASF" width="20"></div>
					<div class="pr-medium"><a href="http://www.apache.org/" target="_blank">Foundation</a></div>
					<div class="pr-medium"><a href="https://www.apache.org/events/current-event.html" target="_blank">Events</a></div>
					<div class="pr-medium"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div>
					<div class="pr-medium"><a href="https://www.apache.org/foundation/thanks" target="_blank">Thanks</a></div>
					<div class="pr-medium"><a href="https://www.apache.org/security" target="_blank">Security</a></div>
					<div class="pr-medium"><a href="https://www.apache.org/foundation/sponsorship" target="_blank">Sponsorship</a></div>
				</div>
				<p class="my-medium">&copy; <script>document.write(new Date().getFullYear())</script> <a href="https://apache.org" target="_blank">The Apache Software Foundation</a> under the terms of the Apache License 2.0. Apache, the Apache feather logo, and Apache Cassandra are trademarks of The Apache Software Foundation.</p>
			</div>
		</div>
                <div id="fade" class="hidden"></div>
			<div id="modal" class="modal hidden">
				<div id="close-modal" class="cursor-pointer"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>
				<div id="mod-content" class="vid-mod-content resp-container">
			</div>
		</div>
	</body>
</html>
